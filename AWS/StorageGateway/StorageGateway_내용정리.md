## Storage Gateway 란

- AWS Storage Gateway 파일 게이트웨이는 온프레미스와 AWS 의 스토리지 연결 서비스이지, 마이그레이션 서비스가 아니다.
- Storage Gateway 는 온프레미스 데이터 센터의 데이터와 AWS 클라우드의 스토리지를 연결하는 서비스
- 하이브리드 클라우드 스토리지로도 부름 (온프레미스 인프라 + 클라우드 인프라)
- 온프레미스의 데이터를 AWS 클라우드로 실시간으로 전송 및 저장 가능 (짧은 지연시간 액세스)
- 온프레미스에 로컬 캐시기능을 통해 자주 사용하는 데이터 보관 가능
- 파일 백업, 클라우드 파일저장소, 재해복구 저장소의 용도로 사용 가능
- 온프레미스 스토리지 공간과 관련 비용 절감 효과
    - 4가지 유형의 게이트웨이 : S3 파일게이트웨이, FSx 파일 게이트웨이, 볼륨 게이트웨이, 테이프 게이트웨이

<br />

### S3 파일 게이트웨이

- NFS 지원하는 파일게이트웨이를 사용, 로컬 캐시를 사용해 짧은 지연시간 유지 및 S3로 온프레미스 데이터 마이그레이션
- 온프레미스와 S3간에 파일 단위로 전송하는 게이트웨이
- NFS, SMB 프로토콜을 이용하여 S3에서 객체를 저장하고 검색 가능
- Active Directory (AD) 서비스와 통합하여 인증된 사용자만 액세스하도록 구성 가능
- 온프레미스의 파일 저장공간이 부족하여 파일을 클라우드에 저장해서 액세스하는 경우 사용
- 파일을 백업용도로 클라우드에 저장하는데 사용

<br />

### FSx 파일 게이트웨이

- 온프레미스와 Amazon FSx for Windows File Server 간에 파일 단위로 전송하는 게이트웨이
- SMB 프로토콜을 이용
- Active Directory (AD) 서비스와 통합하여 인증된 사용자만 액세스 허용 가능

<br />

### 볼륨 게이트웨이

- 볼륨 게이트웨이는 NFS 프로토콜을 지원하지 않는다.
- iSCSI 연결을 사용해 온프레미스 애플리케이션에 블록 스토리지를 제공
- 볼륨데이터는 S3에 저장되며 볼륨을 EBS 스냅샷으로 저장 및 AWS Backup 서비스로 백업 가능
    - 캐싱볼륨
        - 기본 데이터는 S3에 저장하고 자주 액세스하는 일부데이터만 로컬 캐싱에 저장, 캐시를 통해 액세스
        - AWS S3 에 전체 데이터세트를 저장하는 동안 자주 액세스하는 데이터를 캐싱
    - 저장볼륨
        - 모든 데이터를 로컬에 저장 후 AWS에 비동기식으로 백업, 로컬에 백업세트가 저장된 효과
        - 전제 데이터에 가장 짧은 지연시간으로 액세스할 수 있음
        - 데이터세트에 가장 빠르게 액세스할 수 있음

<br />

### 테이프 게이트웨이

- 온프레미스의 테이프 백업 애플리케이션과 S3 간의 전송을 위한 게이트웨이
- 기존의 온프레미스 테이프 백업 장치 구성을 변경하지 않아도 AWS S3로 백업가능
- S3 Glacier(S3 Glacir Flexible Retrival) 또는 S3 Glacier Deep Archive 로 백업을 하여 저장비용 최소화 가능

<br />

### 하드웨어 어플라이언스

- 온프레미스 서버에 Storage Gateway 애플리케이션을 설치해야 함
- Storage Gateway 소프트웨어가 미리 설치된 하드웨어 어플라이언스를 구매하여 운용 가능