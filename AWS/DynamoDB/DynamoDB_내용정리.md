## DynamoDB 란

- 재해 복구 지역에 Auto Scaling 그룹과 로드 밸런서를 생성합니다. DynamoDB 테이블을 전역 테이블로 구성합니다. 새 재해 복구 지역의 로드 밸런서를 가리키도록 DNS 장애 조치를 구성합니다.
- DynamoDB 에서 글로벌 보조 인덱스 (GSI) 를 사용하면 여러 유형으로 쿼리를 수행할 수 있다.
- 강력한 일관된 읽기 요청을 사용하면 읽기전에 성공적인 응답을 수신한 모든 쓰기를 반영한 결과를 반환한다.
- 테이블에 대한 최종 일관성 읽기를 요청하는 것은 기본 설정이며, 최근 완료한 쓰기 결과를 반영하지 못할 수 있다.
- DynamoDB를 카탈로그 데이터로 사용하여 트래픽 양에 따라 확장할 수 있으며, ElastiCache 를 세션 스토어로 사용하고 가장 낮은 대기시간을 제공할 수 있다.
- 예측 가능한 트래픽을 위해서는 테이블을 생성할 때 DynamoDB Auto Scaling 을 활성화할 수 있다.
- 트래픽이 예측 불가능한 워크로드를 위해서는 테이블 생성 시 DynamoDB 온디맨드 용량 할당 활성화를 사용하면 된다.
- DynamoDB 는 일관된 구조를 지닌 JSON 문서를 저장하기에 활용이 적합하다.
- DynamoDB 가 초당 수백만 요청의 최대 로드를 지원하고, 밀리초 내에 응답을 전달할 수 있다. 또한 데이터베이스 관리 및 확장을 위한 운영 오버헤드를 최소화할 수 있다.
- NoSQL 데이터베이스 서비스
- 키-값, 문서 데이터 모델 지원
- 서버리스 서비스
- 용량에 맞게 자동으로 확장 및 축소 (Auto Scaling) 하므로 관리 및 오버헤드 최소화
- 10밀리 초 미만의 빠른 응답을 제공
- 초당 수백만개 이상의 요청 처리 가능
- 지연시간이 짧은, 빠른 응답이 필요한 애플리케이션에 사용
- 쇼핑몰 장바구니, 은행 트랜잭션, 게임 플레이어 기록 저장 등에 사용
- DynamoDB 는 확장을 위해 읽기전용 복제본이나 인스턴스 크기 변경을 필요로 하지 않기 때문에 RDS 보다 확장이 쉽다.
- DynamoDB 는 SSD 드라이브를 사용한다.
- 지리적으로 분리된 3개의 데이터센터에 분산되어 있다.


<br />

### 글로벌 테이블

- DynamoDB 글로벌 테이블을 구성하면 1초 이내로 다른 리전으로 데이터 복제 및 모든 리전에 읽기/쓰기 가능하므로 서비스 중단이 없다.
- 리전간에 데이터베이스를 복제하는 기능
- 모든 리전에서 읽기, 쓰기 가능
- 복제본 테이블에 있는 항목의 모든 변경 사항은 동일한 글로벌 테이블 내의 다른 모든 복제본에 1초이내로 복제됨
- 하나의 리전에 문제가 발생해도 다른 리전으로 라우팅되므로 재해 복구 기능을 함
- 사용자는 가까운 리전에서 DB를 사용하기에 더욱 빠른 성능 지원

<br />

### DynamoDB Streams

- DB 테이블에 저장된 항목에 변경이 발생하는 경우 변경 사항을 캡처하는 기능
- 예) 변경 사항에 대해 Kinesis Data Streams 으로 보낼 수 있음
- 예) 변경사항 이벤트가 발생할 때마다 이벤트를 Lambda 로 트리거하여 Amazon SNS 로 전송하여 이메일 등의 이벤트 알림을 생성할 수 있음

<br />

### 읽기 일관성

- DynamoDB 에서 데이터를 읽을 때, 사용자는 읽기를 최종적 일관된 읽기나 강력한 일관된 읽기로 지정가능
- 최종적 일관된 읽기 (기본값)
    - 최종 일관성 옵션은 읽기 처리량을 최대화
    - 최종적 일관된 읽기는 최근 완료한 쓰기 결과를 반영하지 못할 수 있음
- 강력한 일관된 읽기
    - 읽기 전에 성공적인 응답을 수신한 모든 쓰기를 반영한 결과를 반환
    - 최종적 일관된 읽기 보다 읽기 지연시간이 길어지거나 처리 용량을 많이 사용

<br />

### 백업 및 복구

- DB 테이블에 대해 온디맨드 백업을 생성하고 특정 시점으로 복구를 활성화
- 특정 시점으로 복구 PITR(Point-in-time recovery) 를 사용해 최근 35일 이내 원하는 시점으로 테이블 복원 가능

<br />

### DynamoDB 테이블 클래스

- DynamoDB Standard : 기본형으로 대부분의 워크로드에 권장
- DynamoDB Standard-IA : 애플리케이션 로그, 오래된 소셜 미디어 게시물 등 자주 액세스하지 않는 데이터를 저장하는 테이블에 대한 비용을 줄임

<br />

### 읽기/쓰기 용량 모드

- 온디맨드 모드 : 초당 읽기/쓰기 처리량을 자동으로 조정, 트래픽 예측이 불가능한 경우 사용
- 프로비전드 모드 : 읽기/쓰기 횟수를 수동으로 조정, 트래픽 예측이 가능한 경우를 사용

<br />

### DynamoDB Accelerator (DAX)

- DynamoDB Accelerator (DAX) 는 읽기 성능응 향상시키는 솔루션이다.
- 데이터베이스 앞에 인메모리 캐시를 사용해서 DB의 성능을 향상시키는 기능
- 마이크로 초 단위의 응답시간을 제공

<br />

### TTL (Time to Live)

- DynamoDB 유지 시간(TTL) 을 사용하여 항목별 타임스탬프를 정의하여 항목이 더 이상 필요하지 않은 시점을 결정
- 지정된 타임스탬프 날짜 및 시간이 지나면 DynamoDB 테이블에서 항목을 삭제
- 예) 애플리케이션에서 1년 동안 사용하지 않은 사용자 또는 센서 데이터를 제거
- 예) 만료된 항목을 Amazon DynamoDB Streams 및 AWS Lambda 를 통해 Amazon S3 에 보관


