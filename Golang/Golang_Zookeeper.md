<aside>
π’΅ μ£Όν‚¤νΌμ Watcher μ΄λ²¤νΈλ¥Ό λ°›λ” λ‚΄λ¶€ μ†μ¤λ” Mutax μ μμ—­μ— λ“¤μ–΄μ¬κΉ?
ν•λ‚μ λ©”μΈμ“°λ λ“μ— μν•΄ μ—¬λ¬κ°μ Watcher λ¥Ό λ“±λ΅ν•λ‹¤κ³  ν•μ€μ„ λ•,
Mutax μ μμ—­μ— λ“¤μ–΄μ¬ κ±° κ°™μ€λ°β€¦

</aside>

<aside>
π’΅ μ—¬λ¬ κ°μ λ…Έλ“μ— UsingWatcher λ¥Ό κ±Έμ–΄λ†“κ³  μ‹¶μ€λ°, κ° UsingWatcher λ¥Ό κ³ λ£¨ν‹΄μΌλ΅ λΉΌλ”κ² λ§μ„κΉ?

</aside>

### Zookeeper μ UsingWatcher λ©”μ„λ“ λ™μ‘ λ°©μ‹

---

- Curator μ—μ„ UsingWatcher λ©”μ„λ“λ” μ§€μ •λ Watcher μΈμ¤ν„΄μ¤λ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ²¤νΈλ¥Ό κ°μ‹ν•λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
- Zookeeper client κ°€ μ΄λ²¤νΈλ¥Ό μμ‹ ν•λ©΄ ν•΄λ‹Ή μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•λ” Watcher μ process λ©”μ„λ“κ°€ νΈμ¶λ©λ‹λ‹¤.
- μ΄λ• process λ©”μ„λ“λ” zookeeper μ μ΄λ²¤νΈ μ¤λ λ“μ— μν•΄μ„ μ‹¤ν–‰λ©λ‹λ‹¤.
    - process λ©”μ„λ“ λ‚΄μ—μ„ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” μ‘μ—…μ„ μν–‰ν•λ©΄ Zookeeper μ΄λ²¤νΈ μ¤λ λ“κ°€ λΈ”λ΅ν‚Ήλμ–΄ λ‹¤λ¥Έ μ΄λ²¤νΈμ²λ¦¬κ°€ μ§€μ—°λ  μ μλ‹¤λ” μ 
    - process λ©”μ„λ“ λ‚΄μ—μ„ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” μ‘μ—…μ„ λ³„λ„μ μ¤λ λ“λ΅ μ²λ¦¬ν•λ” κ²ƒμ΄ μ ν•©ν•λ‹¤.

### Zookeeper μ μ΄λ²¤νΈμ¤λ λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ²¤νΈ μ²λ¦¬

---

- Zookeeper λ” λ¶„μ‚° μ‹μ¤ν…μ—μ„ λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ³  λ™κΈ°ν™”ν•λ”λ° μ‚¬μ©λλ” λ†’μ€ μ‹ λΆ°μ„±μ„ κ°€μ§„ ν”„λ΅μ νΈμ΄λ‹¤.
- Zookeeper ν΄λΌμ΄μ–ΈνΈλ” μ΄λ²¤νΈ μ¤λ λ“λ¥Ό μ‚¬μ©ν•μ—¬ Zookeeper μ„λ²„μ—μ„ μ „λ‹¬λλ” μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•©λ‹λ‹¤.
- μ΄λ²¤νΈ μ¤λ λ“μ νΉμ§•
    - λ‹¨μΌ μ¤λ λ“ : μ΄λ²¤νΈ μ¤λ λ“λ” ν΄λΌμ΄μ–ΈνΈλ‹Ή ν•λ‚λ§ μ΅΄μ¬ν•λ©°, λ¨λ“  μ΄λ²¤νΈ μ²λ¦¬λ¥Ό μμ°¨μ μΌλ΅ μν–‰ν•©λ‹λ‹¤. μ΄λ” λ™μ‹μ„± λ¬Έμ λ¥Ό ν”Όν•  μ μμ§€λ§, μ΄λ²¤νΈ μ²λ¦¬μ— μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” κ²½μ° λ‹¤λ¥Έ μ΄λ²¤νΈ μ²λ¦¬κ°€ μ§€μ—°λ  μ μμµλ‹λ‹¤.
    - λΉ„λ™κΈ° μ²λ¦¬ : μ΄λ²¤νΈ μ¤λ λ“λ” zookeeper μ„λ²„μ—μ„ μ „λ‹¬λλ” μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ λΉ„λ™κΈ°μ μΌλ΅ λ™μ‘ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ λ©”μΈ μ¤λ λ“κ°€ λ‹¤λ¥Έ μ‘μ—…μ„ κ³„μ† μν–‰ν•  μ μμµλ‹λ‹¤.
    - μ΄λ²¤νΈ μ²λ¦¬ : μ΄λ²¤νΈ μ¤λ λ“λ” λ‹¤μ–‘ν• μΆ…λ¥μ μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
        - λ…Έλ“ μƒμ„±, λ…Έλ“ μ‚­μ , λ…Έλ“ μ—…λ°μ΄νΈ, μ—°κ²° μƒνƒ λ³€κ²½ λ“±μ μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
        - μ΄λ²¤νΈ μ²λ¦¬ μ‹ λ“±λ΅λ Watcher μ process λ©”μ„λ“κ°€ νΈμ¶λ©λ‹λ‹¤.
    - Watcher μ‚¬μ© : Zookeeper ν΄λΌμ΄μ–ΈνΈλ” Watcher μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ—¬ μ΄λ²¤νΈμ²λ¦¬λ¥Ό μ»¤μ¤ν„°λ§μ΄μ¦ν•  μ μμµλ‹λ‹¤. μ΄λ²¤νΈ μ¤λ λ“λ” λ“±λ΅λ Watcher μ process λ©”μ„λ“λ¥Ό νΈμ¶ν•μ—¬ μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•©λ‹λ‹¤.

<aside>
π’΅ Zookeeper ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬κ°μ Watcher λ¥Ό μ‚¬μ©ν•λ” κ²½μ° κ° Watcher λ” λ…λ¦½μ μΌλ΅ λ™μ‘ν•λ‹¤.

</aside>

- Zookeeper ν΄λΌμ΄μ–ΈνΈλ” Watcher λ¥Ό μ‚¬μ©ν•μ—¬ Zookeeper μ„λ²„μ—μ„ μ „λ‹¬λλ” μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•©λ‹λ‹¤.
- Watcher λ” μ΄λ²¤νΈκ°€ λ°μƒν•  λ•λ§λ‹¤ Zookeeper ν΄λΌμ΄μ–ΈνΈμ—κ² μ•λ¦¬λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.
- μ—¬λ¬ κ°μ Watcher μ΄λ²¤νΈκ°€ λ°μƒν•λ”λΌλ„ μ΄λ²¤νΈ μ¤λ λ“μ—μ„ μμ°¨μ μΌλ΅ μ²λ¦¬λλ©°, λ™μ‹μ— μ‹¤ν–‰λμ§€ μ•μµλ‹λ‹¤. λ”°λΌμ„ ν•λ‚μ μ¤λ λ“μ—μ„ μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•λ©΄ μ΄λ²¤νΈ μ²λ¦¬ κ°„ μμ„κ°€ λ³΄μ¥λμ§€λ§, μ΄λ²¤νΈ μ²λ¦¬ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” κ²½μ° μ„±λ¥μ΄ μ €ν•λ  μ μμµλ‹λ‹¤.

- application μ—μ„ μ΄λ²¤νΈ μ²λ¦¬ν•¨μλ¥Ό κ³ λ£¨ν‹΄μΌλ΅ μ‚¬μ©ν•λ‹¤κ³  ν•μ€μ„ λ•, μ£Όν‚¤νΌ λ‚΄μ μ΄λ²¤νΈ μ¤λ λ“λ” λ‹¨μΌ μ“°λ λ“μ΄λ©°, μμ°¨μ μΌλ΅ νΈμ¶ν•κΈ° λ•λ¬Έμ— κ³ λ£¨ν‹΄μ΄ λ™μ‹μ— νΈμ¶λ  μΌμ€ μ—†λ‹¤.
- ν•μ§€λ§ κ³ λ£¨ν‹΄μ λ‚΄λ¶€ ν•¨μκ°€ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” κ²½μ° λ™μ‹μ— λ™μ‘ν•λ” κ²½μ°λ” λ°μƒν•  μ μκΈ° λ•λ¬Έμ— λ™κΈ°ν™” μ²λ¦¬λ¥Ό ν•΄μ¤μ•Ό ν•λ‹¤.

### Golang μ Mutax

---

- Golang μ—μ„ mutex λ” mutual exlusion μ μ¤„μ„λ§λ΅, μ—¬λ¬ κ³ λ£¨ν‹΄μ΄ λ™μ‹μ— κ³µμ  λ°μ΄ν„°μ— μ•΅μ„Έμ¤ν•λ” κ²ƒμ„ λ°©μ§€ν•κΈ° μ„ν• λ™κΈ°ν™” μ›λ¦¬μ΄λ‹¤.
- κ³µμ  λ°μ΄ν„°λ¥Ό λ³΄νΈν•κΈ° μ„ν•΄ λ®¤νƒμ¤λ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • μ½”λ“ μμ—­μ΄ ν• λ²μ— ν•λ‚μ κ³ λ£¨ν‹΄μ— μν•΄μ„λ§ μ‹¤ν–‰λλ„λ΅ ν•λ‹¤.
- μ΄λ ‡κ² ν•¨μΌλ΅μ¨ λ™μ‹μ„± λ¬Έμ λ¥Ό λ°©μ§€ν•  μ μλ‹¤.
    - κ²½μ μ΅°κ±΄
    - λ°μ΄ν„° κ²½μ
- Go μ—μ„ sync ν¨ν‚¤μ§€μ mutex κµ¬μ΅°μ²΄ μ‚¬μ© λ°©λ²•
    - sync.Mutex νƒ€μ…μ λ³€μλ¥Ό μ„ μ–Έ
        - `var myMutex sync.Mutex`
    - κ³µμ  λ°μ΄ν„°μ— μ•΅μ„Έμ¤ν•κΈ° μ „μ— Lock() λ©”μ„λ“λ¥Ό νΈμ¶ν•μ—¬ λ®¤ν…μ¤λ¥Ό μ κΈ‰λ‹λ‹¤.
        - `myMutex.Lock()`
    - κ³µμ  λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² μμ •ν•κ±°λ‚ μ‚¬μ©ν•©λ‹λ‹¤.
    - κ³µμ  λ°μ΄ν„° μ‘μ—…μ΄ μ™„λ£λλ©΄ Unlock() λ©”μ„λ“λ¥Ό νΈμ¶ν•μ—¬ λ®¤ν…μ¤λ¥Ό ν•΄μ ν•©λ‹λ‹¤.
        - `myMutex.Unlock()`
    - λ®¤ν…μ¤λ¥Ό μ‚¬μ©ν•λ©΄ κ³µμ  λ°μ΄ν„°λ¥Ό μμ •ν•κ±°λ‚ μ‚¬μ©ν•λ” μ½”λ“ μμ—­μ΄ ν• λ²μ— ν•λ‚μ κ³ λ£¨ν‹΄μ— μν•΄μ„λ§ μ‹¤ν–‰λλ―€λ΅, λ™μ‹μ„± λ¬Έμ λ¥Ό ν¨κ³Όμ μΌλ΅ λ°©μ§€ν•  μ μμµλ‹λ‹¤.****