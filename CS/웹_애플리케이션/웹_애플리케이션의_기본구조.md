
# 웹 애플리케이션의 기본 구조 

---



![Screen Shot 2022-12-26 at 9 07 29 PM](https://user-images.githubusercontent.com/41246605/209548516-fe70dc6b-eb1f-425b-b763-8f7fd107f43e.png)

<br />

- 사용자가 [www.kookyung.com](http://www.kookyung.com) 사이트에 접속을 요청합니다.
- 그러면 DNS(Domain Name Server) 서버에서 등록된 도메인에 대한 IP 주소 192.168.0.1 을 응답하게 됩니다.
- 192.168.0.1 의 index.html 을 WebClient 는 다시 요청하게 됩니다.
- 그러면 WebServer (Apache, Ngnix 등) 에서 html, css 등 정적 페이지를 반환합니다.
- 동적으로 보여줘야하는 데이터들은 각각 API에 맞게 WAS 로 요청을 보냅니다.
- 각 WAS 에서는 비즈니스로직을 수행하고, DB 와 커넥션을 맺어 적절한 데이터값을 불러옵니다.
- 가공된 값을 Response 값으로 WebServer 에게 반환합니다.
- 이는 HTML 에 값으로 표현됩니다.

## 관련 개념

---

### HTTP

- HTTP (Hypertext Transfer Protocol) 는 하이퍼텍스트 전송 규약으로 클라이언트와 서버가 서로 통신할 수 있게 하기 위한 언어를 정의하는 어플리케이션 규약

### IP 주소 / 포트 번호

- IP 주소는 논리적인 주소로 장비를 구분하는 주소이다.
- IP 표현 방법은 IPv4 와 IPv6 가 있다.
    - IPv4 는 32bit 주소로 8bit 씩 구분해서 10진수로 표현한다.
        - 255.255.255.255
    - IPv6 는 PC 이외에 스마트폰, TV, 자동차 등도 통신을 하기 위해 만들어졌다.
        - IPv6 는 128bit 이며 16비트씩 끊어서 16진수로 표현한다.
        - 2001:0DB8:AC10:FE01:0000:0000:0000:0000
- 포트 번호(Port number) 는 프로세스 번호이다.
    - IP 내에서 프로세스를 구분하기 위해 사용된다.
    - 포트번호는 0부터 65535 의 포트 번호가 있다.
        - 0번 ~ 1023번 : 잘 알려진 포트
        - 1024번 ~ 49151번 : 등록된 포트
        - 49152번 ~ 65535번 : 동적 포트
        - 20,21 : 파일 전송 (data, 제어)
        - 22 : SSH (원격 제어)
        - 23 : 텔넷
        - 53: DNS
        - 80 : 월드 와이드 웹 HTTP
        - 443: HTTPS
        - 8080 : 톰캣 서버의 기본포트
        - 1521 : 오라클의 기본포트
        - 3306 : MySQL 의 포트번호

### 방화벽 (Fire Wall)

모든 클라이언트가 웹 서버에 요청했을 때 요청된 파일을 받을 수 있다면, 보안이 너무 위험하다.

일반적으로 방화벽 (Fire Wall) 을 사용한다.

![Screen Shot 2022-12-26 at 9 18 37 PM](https://user-images.githubusercontent.com/41246605/209548526-02f64115-ceac-4c01-bdc4-f64d21302b57.png)

- 방화벽은 80 포트를 제외한 모든 포트를 차단합니다.
- 80포트에는 중요한 것이 없는 웹서버만 존재합니다.
- 80포트로 접근한 정상 트래픽은 WAS를 거쳐 DB에 접근할 수 있고, 유해한 트래픽은 WAS, DB 로 접근하지 못하고 웹서버에서 끊깁니다.
- 로그인을 통해 웹의 접근 권한을 획득하는데, 이 때 사용되는 token (키) 를 받아, token 을 가진 트래픽은 정상트래픽으로 분류되고, token 이 없는 트래픽은 유해한 트래픽으로 분리합니다.
- 한 번 접속한 권한은 브라우저에 쿠키로 저장될 수 있스빈다.
    - 쿠키는 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각이빈다.
    - 브라우저는 쿠키를 저장해놓고 동일한 서버 접속 시 쿠키를 요청과 함께 전송해 로그인을 또 할 필요없이 서비스를 받을 수 있습니다.

# Reference

---

- [https://kookyungmin.github.io/server/2018/08/05/s_note_01/](https://kookyungmin.github.io/server/2018/08/05/s_note_01/)